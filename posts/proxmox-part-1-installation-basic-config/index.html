<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Proxmox Part 1: Installation &amp; Basic Config" /><meta property="og:locale" content="en" /><meta name="description" content="The foundation of my homelab is Proxmox, an open-source virtualization platform that allows me to run virtual machines and containers on my hardware. In this post, I&#39;ll walk through the installation and basic configuration of Proxmox." /><meta property="og:description" content="The foundation of my homelab is Proxmox, an open-source virtualization platform that allows me to run virtual machines and containers on my hardware. In this post, I&#39;ll walk through the installation and basic configuration of Proxmox." /><link rel="canonical" href="https://www.robertsinfosec.com/posts/proxmox-part-1-installation-basic-config/" /><meta property="og:url" content="https://www.robertsinfosec.com/posts/proxmox-part-1-installation-basic-config/" /><meta property="og:site_name" content="robertsinfosec" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2024-06-04T13:00:00-04:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Proxmox Part 1: Installation &amp; Basic Config" /><meta name="twitter:site" content="@robertsinfosec" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-06-04T13:00:00-04:00","datePublished":"2024-06-04T13:00:00-04:00","description":"The foundation of my homelab is Proxmox, an open-source virtualization platform that allows me to run virtual machines and containers on my hardware. In this post, I&#39;ll walk through the installation and basic configuration of Proxmox.","headline":"Proxmox Part 1: Installation &amp; Basic Config","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.robertsinfosec.com/posts/proxmox-part-1-installation-basic-config/"},"url":"https://www.robertsinfosec.com/posts/proxmox-part-1-installation-basic-config/"}</script><title>Proxmox Part 1: Installation & Basic Config | robertsinfosec</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="robertsinfosec"><meta name="application-name" content="robertsinfosec"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.21.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return 'mode'; } static get MODE_ATTR() { return 'data-mode'; } static get DARK_MODE() { return 'dark'; } static get LIGHT_MODE() { return 'light'; } static get ID() { return 'mode-toggle'; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia('(prefers-color-scheme: dark)'); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { document.documentElement.removeAttribute(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage( { direction: ModeToggle.ID, message: this.modeStatus }, '*' ); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"> <img src="https://avatars.githubusercontent.com/u/54506297?s=200&v=4" width="112" height="112" alt="avatar" onerror="this.style.display='none'"> </a><h1 class="site-title"> <a href="/">robertsinfosec</a></h1><p class="site-subtitle fst-italic mb-0">Exploring InfoSec in my HomeLab</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/projects/" class="nav-link"> <i class="fa-fw fas fa-briefcase"></i> <span>PROJECTS</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/robertsinfosec" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="https://twitter.com/robertsinfosec" aria-label="twitter" target="_blank" rel="noopener noreferrer" > <i class="fab fa-twitter"></i> </a> <a href="javascript:location.href = 'mailto:' + ['no-reply','robertsinfosec.com?subject=Undeliverable.'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Proxmox Part 1: Installation & Basic Config</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1"><header><h1 data-toc-skip>Proxmox Part 1: Installation & Basic Config</h1><div class="post-meta text-muted"> <span> Posted <time data-ts="1717520400" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Jun 4, 2024 </time> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/robertsinfosec">robertsinfosec</a> </em> </span> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="1356 words" > <em>7 min</em> read</span></div></div></header><div class="content"><p>The foundation of my homelab is Proxmox, an open-source virtualization platform that allows me to run virtual machines and containers on my hardware. In this post, I'll walk through the installation and basic configuration of Proxmox.</p><h2 id="what-is-proxmox-and-why-use-it"><span class="me-2">What is Proxmox and Why Use It?</span><a href="#what-is-proxmox-and-why-use-it" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Proxmox is an open-source virtualization platform that combines the KVM hypervisor and LXC containers to provide a powerful and flexible solution for running virtual machines and containers. Proxmox is designed to be easy to use and manage, making it ideal for homelab enthusiasts and small businesses.</p><p>In short, it's a very powerful platform that allows you to run virtual machines and containers on your hardware. It's a great way to learn about virtualization and experiment with different operating systems and applications. Best of all it is free and runs on almost any hardware.</p><h2 id="hardware"><span class="me-2">Hardware</span><a href="#hardware" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Just a note on hardware. Although you can buy big, VERY loud servers (REAL servers) on eBay, I would recommend using Small Form Factor (SFF) desktops. They are super quiet, generally have decent specs (i5, i7, etc.), and are very power efficient.</p><p>What's great is that several vendors have great, inexpensive options. Put another way, these small machines support multi-core processors, often have a limit of 32GB, 64GB and some can use 128GB of RAM. You can get multiple m.2/NVMe drives to have plenty of storage, plus any external storage you might need.</p><blockquote class="prompt-tip"><p>Proxmox also supports <a href="https://pve.proxmox.com/wiki/Storage:_iSCSI">iSCSI</a>, <a href="https://pve.proxmox.com/wiki/Deploy_Hyper-Converged_Ceph_Cluster">CEPH</a>, <a href="https://pve.proxmox.com/wiki/Storage:_NFS">NFS</a>, etc., so you can add network-based, external storage as needed. More on <a href="https://ceph.io/en/">CEPH</a>, too.</p></blockquote><h3 id="small-form-factor-desktops"><span class="me-2">Small Form Factor Desktops</span><a href="#small-form-factor-desktops" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Below are some examples of what to search for on eBay, for example if you want to go the very-inexpensive route:</p><ol><li>Dell Optiplex 7010 SFF, 7020 SFF, 7040 SFF, etc.<li>HP EliteDesk 800 G1 SFF, 800 G2 SFF, etc., or ProDesk 600 G1 SFF, 600 G2 SFF, etc.<li>Lenovo ThinkCentre M93p SFF, M92p SFF, etc., or M83 SFF, M82 SFF, etc.</ol><h3 id="intel-nucs"><span class="me-2">Intel NUCs</span><a href="#intel-nucs" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>If you want to go the more expensive route, you can look at <a href="https://en.wikipedia.org/wiki/Next_Unit_of_Computing">Intel NUCs</a>. They are small, quiet, and very power efficient. They are also very powerful, with the latest models supporting up to 64GB of RAM and multiple m.2/NVMe drives.</p><blockquote class="prompt-info"><p><strong>NOTE</strong>:</p><p>The "<strong>Skylake-U</strong>", or <strong>6th Generation</strong> and up is where 32GB of RAM and more is supported. Before this, the maximum was typically 8GB or 16GB, which is not-great when you want to host multiple VM's in your Proxmox environment.</p><p>The "<strong>Whiskey Lake-U</strong>", or <strong>8th generation</strong> and up, is where 64GB of RAM is supported. This is a great option if you want to run multiple VM's and containers.</p></blockquote><h2 id="installation"><span class="me-2">Installation</span><a href="#installation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>To install Proxmox, you will need to download the Proxmox VE ISO from the Proxmox website and create a bootable USB drive. You can then boot from the USB drive on the hardware you want to install Proxmox on and follow the on-screen instructions to install Proxmox.</p><ol><li>Download the Proxmox VE ISO from the <a href="https://www.proxmox.com/en/downloads/category/iso-images-pve">Proxmox website</a>.<li>Create a bootable USB drive with the Proxmox VE ISO using a tool like <a href="https://rufus.ie/">Rufus</a>. You can also use <a href="https://www.balena.io/etcher/">Balena Etcher</a>. See <a href="/posts/install-ubuntu-from-iso/#creating-a-usb-thumb-drive-on-windows">this page</a> for more detail about creating a bootable USB drive.<li>Boot from the USB drive on the hardware you want to install Proxmox on.<li>Follow the on-screen instructions to install Proxmox. You can choose to install Proxmox on the local disk or a USB drive.<li>Once the installation is complete, remove the USB drive and reboot the system.<li>Access the Proxmox web interface by navigating to <code class="language-plaintext highlighter-rouge">https://&lt;your-proxmox-ip&gt;:8006</code> in a web browser.</ol><p>That is all that you need to do at the console of the server. So, if you want to run Proxmox "headless", that is all you need to do. Everything else you can do remotely via the web interface, which again will be:</p><blockquote><p><code class="language-plaintext highlighter-rouge">https://&lt;your-proxmox-ip&gt;:8006</code></p></blockquote><h2 id="basic-configuration"><span class="me-2">Basic Configuration</span><a href="#basic-configuration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Once you have installed Proxmox, there are a few basic configuration steps you should take to get started.</p><ol><li>Log in to the Proxmox web interface using the username <code class="language-plaintext highlighter-rouge">root</code> and the password you set during installation.<li>Change the default password for the <code class="language-plaintext highlighter-rouge">root</code> user by clicking on your username in the top right corner and selecting "Change Password."<li>Configure the network settings for Proxmox by clicking on the "Datacenter" node in the tree view, selecting the "Network" tab, and clicking "Create" to add a new network interface.</ol><h2 id="storage-configuration"><span class="me-2">Storage Configuration</span><a href="#storage-configuration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Configuration of storage is a critical step in setting up Proxmox. You can use local storage, network storage, or a combination of both. Unfortunately, this is not a straight-forward setup. Well, if you are not familiar with Logical Volume Manager (LVM) or ZFS, you might find it a bit challenging.</p><h3 id="about-logical-volume-manager-lvm"><span class="me-2">About Logical Volume Manager (LVM)</span><a href="#about-logical-volume-manager-lvm" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>LVM is a logical volume manager for the Linux kernel that manages disk drives and similar mass-storage devices. It provides a way to create logical volumes from physical volumes, allowing you to resize and move them easily.</p><h3 id="about-zfs"><span class="me-2">About ZFS</span><a href="#about-zfs" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>ZFS is a combined file system and logical volume manager designed by Sun Microsystems. It is scalable, includes features such as data integrity verification, compression, and snapshots, and supports high storage capacities.</p><h3 id="quick-setup"><span class="me-2">Quick Setup</span><a href="#quick-setup" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>The most straight-forward way to get started is to SSH into the machine (or use the Console from the web interface) and do the following to use ZFS:</p><h4 id="step-1-assess-the-disks"><span class="me-2">STEP 1: Assess the Disks</span><a href="#step-1-assess-the-disks" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>From the console, run the following command to see the disks that are available:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c"># Run this to see a visual represetation of the disks:</span>
lsblk
</pre></table></code></div></div><p>You should see something like this:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre>NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
sda      8:0    0 238.5G  0 disk
├─sda1   8:1    0   512M  0 part /boot/efi
├─sda2   8:2    0   244M  0 part /boot
└─sda3   8:3    0 237.8G  0 part
  └─pve-root 253:0    0 237.8G  0 lvm  /
sdb      8:16   0 238.5G  0 disk
└─sdb1   8:17   0 238.5G  0 part
  └─pve-data 253:1    0 238.5G  0 lvm  /var/lib/vz
</pre></table></code></div></div><p>In this example, we have two disks, <code class="language-plaintext highlighter-rouge">sda</code> and <code class="language-plaintext highlighter-rouge">sdb</code>, that we can use for storage, as those equate to <code class="language-plaintext highlighter-rouge">/dev/sda</code> and <code class="language-plaintext highlighter-rouge">/dev/sdb</code>.</p><h4 id="step-2-create-a-zfs-pool"><span class="me-2">STEP 2: Create a ZFS Pool</span><a href="#step-2-create-a-zfs-pool" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>ZFS is the simplest option but also a very good option for your hypervisor storage. You can create a ZFS pool using the disks you want to use, based on what you learned from <code class="language-plaintext highlighter-rouge">lsblk</code>:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="c"># Create a ZFS pool using the disks you want to use</span>
<span class="c"># zpool create &lt;pool-name&gt; &lt;disk1&gt; &lt;disk2&gt; ...</span>

<span class="c"># Example:</span>
zpool create prox-data sda sdb
</pre></table></code></div></div><p>You can then run <code class="language-plaintext highlighter-rouge">zpool status</code> to see the status of the pool.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c"># Verify the ZFS pool</span>
zpool status
</pre></table></code></div></div><p>At this point, you should see the pool you created and the disks that are part of it.</p><h4 id="step-3-create-a-zfs-dataset"><span class="me-2">STEP 3: Create a ZFS Dataset</span><a href="#step-3-create-a-zfs-dataset" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Next, you can create a ZFS dataset to store your virtual machines:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="c"># Create a ZFS dataset for storing VMs</span>
<span class="c"># zfs create &lt;pool-name&gt;/&lt;dataset-name&gt;</span>

<span class="c"># Example:</span>
zfs create prox-data/vmdata
</pre></table></code></div></div><p>You can then run <code class="language-plaintext highlighter-rouge">zfs list</code> to see the datasets you have created.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c"># Verify the ZFS dataset</span>
zfs list
</pre></table></code></div></div><p>You should see the dataset you created and the pool it is part of.</p><h4 id="step-4-set-the-default-storage"><span class="me-2">STEP 4: Set the Default Storage</span><a href="#step-4-set-the-default-storage" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Finally, you can set the default storage for Proxmox to use the ZFS dataset you created:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c"># Set the default storage to the ZFS dataset</span>
pvesm <span class="nb">set </span>local-zfs <span class="nt">--dir</span> /prox-data/vmdata
</pre></table></code></div></div><h4 id="step-5-verify-the-storage"><span class="me-2">STEP 5: Verify the Storage</span><a href="#step-5-verify-the-storage" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>You can then run <code class="language-plaintext highlighter-rouge">pvesm status</code> to see the storage configuration.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c"># Verify the storage configuration</span>
pvesm status
</pre></table></code></div></div><p>What this is showing is that you have a storage configuration that is using ZFS and the dataset you created. You can now see this storage available in the Proxmox web interface in the "Storage" tab.</p><h3 id="advanced-setup"><span class="me-2">Advanced Setup</span><a href="#advanced-setup" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>If you want to use LVM or a more complex storage setup, you can refer to the <a href="https://pve.proxmox.com/wiki/Storage">Proxmox documentation</a>.</p><h2 id="summary"><span class="me-2">Summary</span><a href="#summary" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>At this point you should be able to navigate to your Proxmox web interface and start creating virtual machines and containers. You should be able to see your storage available in the web interface in the "Storage" tab.</p><p>At this point, can you create VM's and containers.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/homelab-series/">Homelab Series</a>, <a href="/categories/infrastructure/">Infrastructure</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/proxmox/" class="post-tag no-text-decoration" >proxmox</a> <a href="/tags/homelab/" class="post-tag no-text-decoration" >homelab</a> <a href="/tags/private-cloud/" class="post-tag no-text-decoration" >private-cloud</a> <a href="/tags/on-prem/" class="post-tag no-text-decoration" >on-prem</a> <a href="/tags/sdi/" class="post-tag no-text-decoration" >sdi</a> <a href="/tags/infrastructure-as-code/" class="post-tag no-text-decoration" >infrastructure-as-code</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted me-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Proxmox%20Part%201:%20Installation%20&%20Basic%20Config%20-%20robertsinfosec&url=https%3A%2F%2Fwww.robertsinfosec.com%2Fposts%2Fproxmox-part-1-installation-basic-config%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter" > <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Proxmox%20Part%201:%20Installation%20&%20Basic%20Config%20-%20robertsinfosec&u=https%3A%2F%2Fwww.robertsinfosec.com%2Fposts%2Fproxmox-part-1-installation-basic-config%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook" > <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fwww.robertsinfosec.com%2Fposts%2Fproxmox-part-1-installation-basic-config%2F&text=Proxmox%20Part%201:%20Installation%20&%20Basic%20Config%20-%20robertsinfosec" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram" > <i class="fa-fw fab fa-telegram"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 mb-5 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/setting-up-a-github-runner/">Setting Up a GitHub Runner</a><li class="text-truncate lh-lg"> <a href="/posts/working-locally-with-supabase/">Working Locally with Supabase</a><li class="text-truncate lh-lg"> <a href="/posts/openvms-on-proxmox/">OpenVMS on ProxMox</a><li class="text-truncate lh-lg"> <a href="/posts/letsencrypt-in-your-homelab/">LetsEncrypt in your Homelab</a><li class="text-truncate lh-lg"> <a href="/posts/proxmox-part-2-networking-setup/">Proxmox Part 2: Networking Setup</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/homelab/">homelab</a> <a class="post-tag btn btn-outline-primary" href="/tags/ubuntu/">ubuntu</a> <a class="post-tag btn btn-outline-primary" href="/tags/infrastructure/">infrastructure</a> <a class="post-tag btn btn-outline-primary" href="/tags/virtualization/">virtualization</a> <a class="post-tag btn btn-outline-primary" href="/tags/proxmox/">proxmox</a> <a class="post-tag btn btn-outline-primary" href="/tags/virtualbox/">virtualbox</a> <a class="post-tag btn btn-outline-primary" href="/tags/security/">security</a> <a class="post-tag btn btn-outline-primary" href="/tags/linux/">linux</a> <a class="post-tag btn btn-outline-primary" href="/tags/on-prem/">on-prem</a> <a class="post-tag btn btn-outline-primary" href="/tags/private-cloud/">private-cloud</a></div></section></div><section id="toc-wrapper" class="ps-0 pe-4"><h2 class="panel-heading ps-3 pt-2 mb-2">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/proxmox-part-2-networking-setup/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1718125200" data-df="ll" > Jun 11, 2024 </time><h4 class="pt-0 my-2">Proxmox Part 2: Networking Setup</h4><div class="text-muted"><p> Networking and storage are the two most important components of any virtualization platform. In this post, we will configure networking and storage on our Proxmox server. Although some people will ...</p></div></div></a></article><article class="col"> <a href="/posts/creating-a-local-ubuntu-mirror/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1651311660" data-df="ll" > Apr 30, 2022 </time><h4 class="pt-0 my-2">Creating a Local Ubuntu Mirror</h4><div class="text-muted"><p> Overview I almost exclusively use Ubuntu Server as my operating system of choice for everything. This is because there is broad support, it&#39;s super-stable, there is lots of engagement where people...</p></div></div></a></article><article class="col"> <a href="/posts/creating-an-ubuntu-cloud-image-in-proxmox/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1653825780" data-df="ll" > May 29, 2022 </time><h4 class="pt-0 my-2">Creating an Ubuntu Cloud Image in ProxMox</h4><div class="text-muted"><p> Overview If you have ProxMox for a hypervisor, then you are used to creating Virtual Machines by allocating a new machine, attaching the installation media of an operating systems, and then manual...</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/learning-rsync-with-chatgpt/" class="btn btn-outline-primary" aria-label="Older" ><p>Learning rsync with ChatGPT</p></a> <a href="/posts/proxmox-part-2-networking-setup/" class="btn btn-outline-primary" aria-label="Newer" ><p>Proxmox Part 2: Networking Setup</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p> © <time>2025</time> <a href="https://github.com/robertsinfosec">robertsinfosec</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span></p><p>Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/homelab/">homelab</a> <a class="post-tag btn btn-outline-primary" href="/tags/ubuntu/">ubuntu</a> <a class="post-tag btn btn-outline-primary" href="/tags/infrastructure/">infrastructure</a> <a class="post-tag btn btn-outline-primary" href="/tags/virtualization/">virtualization</a> <a class="post-tag btn btn-outline-primary" href="/tags/proxmox/">proxmox</a> <a class="post-tag btn btn-outline-primary" href="/tags/virtualbox/">virtualbox</a> <a class="post-tag btn btn-outline-primary" href="/tags/security/">security</a> <a class="post-tag btn btn-outline-primary" href="/tags/linux/">linux</a> <a class="post-tag btn btn-outline-primary" href="/tags/on-prem/">on-prem</a> <a class="post-tag btn btn-outline-primary" href="/tags/private-cloud/">private-cloud</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask"></div><script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.7.1/dist/jquery.min.js,npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js,npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.10/dayjs.min.js,npm/dayjs@1.11.10/locale/en.min.js,npm/dayjs@1.11.10/plugin/relativeTime.min.js,npm/dayjs@1.11.10/plugin/localizedFormat.min.js,npm/tocbot@4.21.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/unregister.js"></script> <script> /* Note: dependent library will be loaded in `js-selector.html` */ SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5"></p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
