<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Working Locally with Supabase" /><meta property="og:locale" content="en" /><meta name="description" content="I started my journey sort of backwards, where I started with a backend up on supabase.com, and I&#39;m now learning how to use it locally. The point of this post is to document the steps I took to get a local Supabase instance running, and how to do migrations and interact with other instances." /><meta property="og:description" content="I started my journey sort of backwards, where I started with a backend up on supabase.com, and I&#39;m now learning how to use it locally. The point of this post is to document the steps I took to get a local Supabase instance running, and how to do migrations and interact with other instances." /><link rel="canonical" href="https://www.robertsinfosec.com/posts/working-locally-with-supabase/" /><meta property="og:url" content="https://www.robertsinfosec.com/posts/working-locally-with-supabase/" /><meta property="og:site_name" content="robertsinfosec" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-01-31T08:03:00-05:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Working Locally with Supabase" /><meta name="twitter:site" content="@robertsinfosec" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-02-02T17:57:46-05:00","datePublished":"2025-01-31T08:03:00-05:00","description":"I started my journey sort of backwards, where I started with a backend up on supabase.com, and I&#39;m now learning how to use it locally. The point of this post is to document the steps I took to get a local Supabase instance running, and how to do migrations and interact with other instances.","headline":"Working Locally with Supabase","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.robertsinfosec.com/posts/working-locally-with-supabase/"},"url":"https://www.robertsinfosec.com/posts/working-locally-with-supabase/"}</script><title>Working Locally with Supabase | robertsinfosec</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="robertsinfosec"><meta name="application-name" content="robertsinfosec"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.21.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return 'mode'; } static get MODE_ATTR() { return 'data-mode'; } static get DARK_MODE() { return 'dark'; } static get LIGHT_MODE() { return 'light'; } static get ID() { return 'mode-toggle'; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia('(prefers-color-scheme: dark)'); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { document.documentElement.removeAttribute(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage( { direction: ModeToggle.ID, message: this.modeStatus }, '*' ); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"> <img src="https://avatars.githubusercontent.com/u/54506297?s=200&v=4" width="112" height="112" alt="avatar" onerror="this.style.display='none'"> </a><h1 class="site-title"> <a href="/">robertsinfosec</a></h1><p class="site-subtitle fst-italic mb-0">Exploring InfoSec in my HomeLab</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/projects/" class="nav-link"> <i class="fa-fw fas fa-briefcase"></i> <span>PROJECTS</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/robertsinfosec" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="https://twitter.com/robertsinfosec" aria-label="twitter" target="_blank" rel="noopener noreferrer" > <i class="fab fa-twitter"></i> </a> <a href="javascript:location.href = 'mailto:' + ['no-reply','robertsinfosec.com?subject=Undeliverable.'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Working Locally with Supabase</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1"><header><h1 data-toc-skip>Working Locally with Supabase</h1><div class="post-meta text-muted"> <span> Posted <time data-ts="1738328580" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Jan 31, 2025 </time> </span> <span> Updated <time data-ts="1738537066" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Feb 2, 2025 </time> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/robertsinfosec">robertsinfosec</a> </em> </span> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="1585 words" > <em>8 min</em> read</span></div></div></header><div class="content"><p>I started my journey sort of backwards, where I started with a backend up on <a href="https://supabase.com">supabase.com</a>, and I'm now learning how to use it locally. The point of this post is to document the steps I took to get a local Supabase instance running, and how to do migrations and interact with other instances.</p><h2 id="what-is-supabase"><span class="me-2">What is Supabase?</span><a href="#what-is-supabase" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Supabase is an open-source Firebase alternative. It's a service that provides a Postgres database, authentication, and storage. It's a great way to get started with a backend without having to worry about setting up a server, and it's free for hobby projects.</p><p><a href="/assets/img/2025-01-31-supabase-logo.png" class="popup img-link shimmer"><img src="/assets/img/2025-01-31-supabase-logo.png" alt="Supabase Logo" title="Supabase Logo" loading="lazy"></a></p><p>I couldn't be more impressed with this platform because this solves 100% of the issues you'd have with MOST applications. This gives you a full-on, proper RDBMS like PostgrSQL (which includes Row Level Security (RLS)), a full-on authentication system that has API's for signing up, logging in, forgot password, MFA/2FA, and more. Then, it also has API's (in REST and GraphQL if you want) for interacting with the database. It uses Kong as an internal API gateway too.</p><blockquote class="prompt-tip"><p>In short, Supabase is a "Backend as a Service" (BaaS) platform, which is a complete "backend" for most applications. This includes: database, authentication, storage, and API's for it all. It's a turn-key, purpose-built backend.</p></blockquote><p>You can host up to two free instances on <a href="https://supabase.com">supabase.com</a>, but this is a free and opensource tool, so you can host it anywhere. Even better, it's Docker/Docker-Compose based. So, in literally minutes, you can stand up a full instance on your workstation too!</p><p>One of the best things though is that the platform is hardened by default, and you almost have to use "database migrations" to make changes to the database. This is a good thing! However, there is some nuance to this, and this post will cover some of this (mostly for my benefit!)</p><h2 id="installing-supabase-locally-on-docker"><span class="me-2">Installing Supabase Locally on Docker</span><a href="#installing-supabase-locally-on-docker" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="step-1-installing-docker-in-wsl"><span class="me-2">STEP 1: Installing Docker in WSL</span><a href="#step-1-installing-docker-in-wsl" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>At the moment I'm primarily using Windows 11 and WSL2 with Ubuntu 24.04. In the Ubuntu instance, I first need to get Docker installed. You can of-course install Docker Desktop on Windows 11, but Docker is "native" in Linux, plus the Node/NPM stuff seems to work far better on the Linux side. I always use this install guide since is works every time and takes care of the details:</p><blockquote><p><strong><a href="https://docs.docker.com/engine/install/ubuntu/#install-using-the-repository">Install using the <code class="language-plaintext highlighter-rouge">apt</code> repository</a></strong></p></blockquote><p>When done, you should be able to verify with <code class="language-plaintext highlighter-rouge">docker --version</code>.</p><h3 id="step-2-installing-nodejs-and-npm"><span class="me-2">STEP 2: Installing NodeJS and NPM</span><a href="#step-2-installing-nodejs-and-npm" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>It's very likely you have some king of NodeJS or NPM needs in modern day development, but if you don't have those installed, you can do so with:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt <span class="nb">install </span>nodejs npm
</pre></table></code></div></div><p>You can verify those with <code class="language-plaintext highlighter-rouge">node --version</code> and <code class="language-plaintext highlighter-rouge">npm --version</code>.</p><h3 id="step-3-installing-supabase-cli"><span class="me-2">STEP 3: Installing Supabase CLI</span><a href="#step-3-installing-supabase-cli" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Assuming you now have Docker and NodeJS/NPM installed, you can now install the Supabase CLI. This is a tool that helps you interact with your Supabase instance, and it's a requirement for running migrations.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="c"># Install globally</span>
npm <span class="nb">install</span> <span class="nt">-g</span> supabase-cli

<span class="c"># Install in your Node project folder</span>
npm <span class="nb">install </span>supabase-cli

<span class="c">## NOTE: NOT installing it globally will require you to use `npx supabase` instead of `supabase`</span>
</pre></table></code></div></div><p>You can verify the installation with <code class="language-plaintext highlighter-rouge">supabase --version</code> or <code class="language-plaintext highlighter-rouge">npx supabase --version</code>.</p><h3 id="step-4-running-a-supabase-locally"><span class="me-2">STEP 4: Running a Supabase Locally</span><a href="#step-4-running-a-supabase-locally" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Now that you have the CLI installed, you can run a Supabase instance locally. This is done with Docker, and you can use the following command to get it running:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>supabase start
</pre></table></code></div></div><p>Then, it will output something like this:</p><div class="language-text highlighter-rouge"><div class="code-header"> <span data-label-text="Text"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre>*supabase local development setup is running.

         API URL: http://127.0.0.1:54321
     GraphQL URL: http://127.0.0.1:54321/graphql/v1
  S3 Storage URL: http://127.0.0.1:54321/storage/v1/s3
          DB URL: postgresql://postgres:postgres@127.0.0.1:54322/postgres
      Studio URL: http://127.0.0.1:54323
    Inbucket URL: http://127.0.0.1:54324
      JWT secret: super-secret-jwt-token-with-at-least-32-characters-long
        anon key: &lt;anon-key&gt;
service_role key: &lt;service-role-key&gt;
   S3 Access Key: &lt;s3-access-key&gt;
   S3 Secret Key: &lt;s3-secret-key&gt;
       S3 Region: local
We recommend updating regularly for new features and bug fixes: https://supabase.com/docs/guides/cli/getting-started#updating-the-supabase-cli*
</pre></table></code></div></div><h2 id="basic-operations"><span class="me-2">Basic Operations</span><a href="#basic-operations" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>There are really two main things that I find useful:</p><ol><li>The Supabase <code class="language-plaintext highlighter-rouge">supabase</code> CLI tool<li>The "Studio" web interface</ol><p>What I found a bit surprising first is that if you navigate to the studio, there is not authentication. But worse, when went to the "SQL Editor" to run a script, I kept getting;</p><div class="language-text highlighter-rouge"><div class="code-header"> <span data-label-text="Text"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ERROR: 42501: must be member of role "supabase_admin"
</pre></table></code></div></div><p>This is because the default user is not an admin, and you can't change that. As it turns out, the whole platform is based around the modern idea of "database migrations". That is, you make a set of changes on your local instance, and then you "migrate" those changes to another instance.</p><h3 id="linking-to-a-supabase-instance"><span class="me-2">Linking to a Supabase Instance</span><a href="#linking-to-a-supabase-instance" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Assuming you have a Supabase instance on supabase.com or someplace else, you need to "link" to it. The Supabase CLI can only understand being connected to one remote instance at a time, but you can have multiple local instances. To link to a remote instance, you can use the following command:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="c"># To specify the URL and key:</span>
supabase <span class="nb">link</span> <span class="nt">--project-ref</span> &lt;your-instance&gt;

<span class="c"># Or to be prompted:</span>
supabase <span class="nb">link</span>
</pre></table></code></div></div><p>It will prompt you for your database password. The <code class="language-plaintext highlighter-rouge">&lt;your-instance&gt;</code> is the URL of your Supabase instance, which you can find in the settings of your instance. For example, if your URL is <code class="language-plaintext highlighter-rouge">https://ncuwgemslxkchvzjrlib.supabase.co</code> then you would use <code class="language-plaintext highlighter-rouge">ncuwgemslxkchvzjrlib</code> for your <code class="language-plaintext highlighter-rouge">&lt;your-instance&gt;</code>.</p><p>The database password was provided to you when you created the instance. If you didn't capture it, you can reset it from Project Settings -&gt; Configuration -&gt; Database, the URL wil be something like this:</p><blockquote><p><strong><code class="language-plaintext highlighter-rouge">https://supabase.com/dashboard/project/&lt;your-instance&gt;/settings/database</code></strong></p></blockquote><p>When you run <code class="language-plaintext highlighter-rouge">supabase link</code>, this will do a <code class="language-plaintext highlighter-rouge">diff</code> on the remote instance vs your local instance and show you the output.</p><h3 id="doing-a-dump-of-the-structure"><span class="me-2">Doing a Dump of the Structure</span><a href="#doing-a-dump-of-the-structure" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>If you want to see the structure of your remote database, you can do a dump of the structure with the following command:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>npx supabase db dump <span class="o">&gt;</span> ./prod-dump.sql
</pre></table></code></div></div><p>Again, note that you can't just copy this code and run it in your SQL Query of your local instance. You won't have privileges to do most of the things. This is where the migrations come in.</p><h3 id="syncreset-local-instance-from-remote"><span class="me-2">Sync/Reset Local Instance from Remote</span><a href="#syncreset-local-instance-from-remote" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Assuming your have a new, empty Supabase local instance, you can sync it with your remote instance with the following command:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>npx supabase db reset
</pre></table></code></div></div><p>This will completely factory-reset your local instance, and then apply all the migrations from your remote instance. This is a good way to get your local instance in sync with your remote instance.</p><blockquote class="prompt-danger"><p>DANGER ZONE: This is destructive and will overwrite your local instance.</p></blockquote><h2 id="running-migrations"><span class="me-2">Running Migrations</span><a href="#running-migrations" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>The idea of migrations is that you create a set of changes to your database, and then you "migrate" those changes to another instance. This is a good way to keep your database changes in sync across multiple instances. You can store your migration files (just <code class="language-plaintext highlighter-rouge">.sql</code> files) and store those in your GitHub repo.</p><h3 id="creating-a-migration"><span class="me-2">Creating a Migration</span><a href="#creating-a-migration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>This is where some of the real magic of Supabase comes in. You can modify the database how you see fit, and it keeps track of the changes. When you are happy with the state of your database, you can then create a migration file that represents those changes. It's a delta of the changes you made.</p><blockquote class="prompt-warning"><p>WARNING: Like with any other technology that works with database migrations, these CAN be destructive, where you could lose data. If you are making new tables or adding columns (with a <code class="language-plaintext highlighter-rouge">default</code>), you'll be fine, but if you are dropping columns or tables, you could lose data. Be careful!</p></blockquote><p>To create a migration, you can use the following command:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>npx supabase migration new &lt;name&gt;
</pre></table></code></div></div><p>Where <code class="language-plaintext highlighter-rouge">&lt;name&gt;</code> is typically something like <code class="language-plaintext highlighter-rouge">create_users_table</code>. This will create a new migration file in your <code class="language-plaintext highlighter-rouge">migrations</code> folder. You can then edit this file to add your changes.</p><h3 id="pulling-migrations-from-remote"><span class="me-2">Pulling Migrations from Remote</span><a href="#pulling-migrations-from-remote" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>If you have migrations on your remote instance that you want to pull down, you can use the following command:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>npx supabase db pull
</pre></table></code></div></div><p>Note that in WSL, it won't cache that database password, so you will be prompted every time. So, you can store an envriorment variable with the password in your <code class="language-plaintext highlighter-rouge">.env</code> file:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">SUPABASE_DB_URL</span><span class="o">=</span>postgresql://postgres:&lt;db-pass&gt;@&lt;your-instance&gt;.supabase.co:5432/postgres
</pre></table></code></div></div><p>Then, you can use the following command:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>npx supabase db pull <span class="nt">-p</span> <span class="nv">$SUPABASE_DB_URL</span>
</pre></table></code></div></div><p>This will pull down all the migrations from your remote instance and store them in your <code class="language-plaintext highlighter-rouge">migrations</code> folder, in a file name like <code class="language-plaintext highlighter-rouge">20250201000659_remote_schema.sql</code>.</p><h3 id="pushing-migrations-to-remote"><span class="me-2">Pushing Migrations to Remote</span><a href="#pushing-migrations-to-remote" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>If you have migrations on your local instance that you want to push up, you can use the following command:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>npx supabase db push <span class="nt">--dry-run</span> <span class="nt">-p</span> <span class="nv">$SUPABASE_DB_URL</span>
</pre></table></code></div></div><p>With <code class="language-plaintext highlighter-rouge">--dry-run</code> obviously to show you what it <em>would</em> do. If you're happy with that, you can remove <code class="language-plaintext highlighter-rouge">--dry-run</code> and run it again.</p><h2 id="next-steps"><span class="me-2">Next Steps…</span><a href="#next-steps" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>This is a very basic overview of how to get started with Supabase locally. There are many more features and capabilities that I haven't covered here, but this should be enough to get you started.</p><p>My next thought is how to do this from a CI/CD pipeline. For example, I often use GitHub Actions with an on-prem runner in a container. So presumably, I could run the Supabase CLI in a container and do the migration for each environment from there. When the front-end gets pushed to a new environment, this Supabase folder will have the migrations to apply for each environment. I'll have to experiment with that and see how it goes.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/app-development/">App Development</a>, <a href="/categories/backend/">Backend</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/homelab/" class="post-tag no-text-decoration" >homelab</a> <a href="/tags/supabase/" class="post-tag no-text-decoration" >supabase</a> <a href="/tags/postgres/" class="post-tag no-text-decoration" >postgres</a> <a href="/tags/docker/" class="post-tag no-text-decoration" >docker</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted me-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Working%20Locally%20with%20Supabase%20-%20robertsinfosec&url=https%3A%2F%2Fwww.robertsinfosec.com%2Fposts%2Fworking-locally-with-supabase%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter" > <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Working%20Locally%20with%20Supabase%20-%20robertsinfosec&u=https%3A%2F%2Fwww.robertsinfosec.com%2Fposts%2Fworking-locally-with-supabase%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook" > <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fwww.robertsinfosec.com%2Fposts%2Fworking-locally-with-supabase%2F&text=Working%20Locally%20with%20Supabase%20-%20robertsinfosec" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram" > <i class="fa-fw fab fa-telegram"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 mb-5 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/setting-up-a-github-runner/">Setting Up a GitHub Runner</a><li class="text-truncate lh-lg"> <a href="/posts/working-locally-with-supabase/">Working Locally with Supabase</a><li class="text-truncate lh-lg"> <a href="/posts/openvms-on-proxmox/">OpenVMS on ProxMox</a><li class="text-truncate lh-lg"> <a href="/posts/letsencrypt-in-your-homelab/">LetsEncrypt in your Homelab</a><li class="text-truncate lh-lg"> <a href="/posts/proxmox-part-2-networking-setup/">Proxmox Part 2: Networking Setup</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/homelab/">homelab</a> <a class="post-tag btn btn-outline-primary" href="/tags/ubuntu/">ubuntu</a> <a class="post-tag btn btn-outline-primary" href="/tags/infrastructure/">infrastructure</a> <a class="post-tag btn btn-outline-primary" href="/tags/virtualization/">virtualization</a> <a class="post-tag btn btn-outline-primary" href="/tags/proxmox/">proxmox</a> <a class="post-tag btn btn-outline-primary" href="/tags/virtualbox/">virtualbox</a> <a class="post-tag btn btn-outline-primary" href="/tags/security/">security</a> <a class="post-tag btn btn-outline-primary" href="/tags/linux/">linux</a> <a class="post-tag btn btn-outline-primary" href="/tags/on-prem/">on-prem</a> <a class="post-tag btn btn-outline-primary" href="/tags/private-cloud/">private-cloud</a></div></section></div><section id="toc-wrapper" class="ps-0 pe-4"><h2 class="panel-heading ps-3 pt-2 mb-2">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/install-centos-from-iso/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1654050120" data-df="ll" > May 31, 2022 </time><h4 class="pt-0 my-2">Install CentOS from ISO</h4><div class="text-muted"><p> Overview There are several scenarios where you might run a server. In cases like cloud providers (e.g. Digital Ocean, Microsoft Azure, Amazon AWS, etc) - you typically just choose an OS option, an...</p></div></div></a></article><article class="col"> <a href="/posts/installing-ubuntu-into-virtualbox-on-windows11/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1654572960" data-df="ll" > Jun 6, 2022 </time><h4 class="pt-0 my-2">Installing Ubuntu into VirtualBox on Windows 11</h4><div class="text-muted"><p> Overview Suppose you want to play around with Linux and maybe you&#39;ve heard people talking about Ubuntu. But you don&#39;t have an extra computer laying around to try it, and you certainly don&#39;t want t...</p></div></div></a></article><article class="col"> <a href="/posts/virtualbox-guest-additions/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1654817760" data-df="ll" > Jun 9, 2022 </time><h4 class="pt-0 my-2">VirtualBox Guest Additions</h4><div class="text-muted"><p> Overview A key part of using VirtualBox is knowing that there is technology like the &quot;VirtualBox Guest Additions&quot;. What this is, are libraries and drivers that tell the hosted operating system, th...</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/openvms-on-proxmox/" class="btn btn-outline-primary" aria-label="Older" ><p>OpenVMS on ProxMox</p></a> <a href="/posts/setting-up-a-public-vps/" class="btn btn-outline-primary" aria-label="Newer" ><p>Setting Up a Public VPS</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p> © <time>2025</time> <a href="https://github.com/robertsinfosec">robertsinfosec</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span></p><p>Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/homelab/">homelab</a> <a class="post-tag btn btn-outline-primary" href="/tags/ubuntu/">ubuntu</a> <a class="post-tag btn btn-outline-primary" href="/tags/infrastructure/">infrastructure</a> <a class="post-tag btn btn-outline-primary" href="/tags/virtualization/">virtualization</a> <a class="post-tag btn btn-outline-primary" href="/tags/proxmox/">proxmox</a> <a class="post-tag btn btn-outline-primary" href="/tags/virtualbox/">virtualbox</a> <a class="post-tag btn btn-outline-primary" href="/tags/security/">security</a> <a class="post-tag btn btn-outline-primary" href="/tags/linux/">linux</a> <a class="post-tag btn btn-outline-primary" href="/tags/on-prem/">on-prem</a> <a class="post-tag btn btn-outline-primary" href="/tags/private-cloud/">private-cloud</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask"></div><script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.7.1/dist/jquery.min.js,npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js,npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.10/dayjs.min.js,npm/dayjs@1.11.10/locale/en.min.js,npm/dayjs@1.11.10/plugin/relativeTime.min.js,npm/dayjs@1.11.10/plugin/localizedFormat.min.js,npm/tocbot@4.21.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/unregister.js"></script> <script> /* Note: dependent library will be loaded in `js-selector.html` */ SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5"></p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
