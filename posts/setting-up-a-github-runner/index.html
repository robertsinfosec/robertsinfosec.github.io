<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Setting Up a GitHub Runner" /><meta property="og:locale" content="en" /><meta name="description" content="In present day it&#39;s pretty common to use GitHub Actions to do your builds and deployments. However, for a hobbyist looking for a free solution, the free tier of GitHub Actions is limited to 2000 minutes per month. This is fine for small projects, but if you&#39;re doing a lot of builds or deployments, you might hit that limit." /><meta property="og:description" content="In present day it&#39;s pretty common to use GitHub Actions to do your builds and deployments. However, for a hobbyist looking for a free solution, the free tier of GitHub Actions is limited to 2000 minutes per month. This is fine for small projects, but if you&#39;re doing a lot of builds or deployments, you might hit that limit." /><link rel="canonical" href="https://www.robertsinfosec.com/posts/setting-up-a-github-runner/" /><meta property="og:url" content="https://www.robertsinfosec.com/posts/setting-up-a-github-runner/" /><meta property="og:site_name" content="robertsinfosec" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-03-03T08:11:00-05:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Setting Up a GitHub Runner" /><meta name="twitter:site" content="@robertsinfosec" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-03-05T10:13:36-05:00","datePublished":"2025-03-03T08:11:00-05:00","description":"In present day it&#39;s pretty common to use GitHub Actions to do your builds and deployments. However, for a hobbyist looking for a free solution, the free tier of GitHub Actions is limited to 2000 minutes per month. This is fine for small projects, but if you&#39;re doing a lot of builds or deployments, you might hit that limit.","headline":"Setting Up a GitHub Runner","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.robertsinfosec.com/posts/setting-up-a-github-runner/"},"url":"https://www.robertsinfosec.com/posts/setting-up-a-github-runner/"}</script><title>Setting Up a GitHub Runner | robertsinfosec</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="robertsinfosec"><meta name="application-name" content="robertsinfosec"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.21.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return 'mode'; } static get MODE_ATTR() { return 'data-mode'; } static get DARK_MODE() { return 'dark'; } static get LIGHT_MODE() { return 'light'; } static get ID() { return 'mode-toggle'; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia('(prefers-color-scheme: dark)'); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { document.documentElement.removeAttribute(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage( { direction: ModeToggle.ID, message: this.modeStatus }, '*' ); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"> <img src="https://avatars.githubusercontent.com/u/54506297?s=200&v=4" width="112" height="112" alt="avatar" onerror="this.style.display='none'"> </a><h1 class="site-title"> <a href="/">robertsinfosec</a></h1><p class="site-subtitle fst-italic mb-0">Exploring InfoSec in my HomeLab</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/projects/" class="nav-link"> <i class="fa-fw fas fa-briefcase"></i> <span>PROJECTS</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/robertsinfosec" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="https://twitter.com/robertsinfosec" aria-label="twitter" target="_blank" rel="noopener noreferrer" > <i class="fab fa-twitter"></i> </a> <a href="javascript:location.href = 'mailto:' + ['no-reply','robertsinfosec.com?subject=Undeliverable.'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Setting Up a GitHub Runner</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1"><header><h1 data-toc-skip>Setting Up a GitHub Runner</h1><div class="post-meta text-muted"> <span> Posted <time data-ts="1741007460" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Mar 3, 2025 </time> </span> <span> Updated <time data-ts="1741187616" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Mar 5, 2025 </time> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/robertsinfosec">robertsinfosec</a> </em> </span> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="1442 words" > <em>8 min</em> read</span></div></div></header><div class="content"><p>In present day it's pretty common to use GitHub Actions to do your builds and deployments. However, for a hobbyist looking for a free solution, the free tier of GitHub Actions is limited to 2000 minutes per month. This is fine for small projects, but if you're doing a lot of builds or deployments, you might hit that limit.</p><p>A really great solution to this is that you can host your own GitHub Runner. This is a service that runs on your own server and can be used to run your GitHub Actions. This is a great solution for a hobbyist or small business that doesn't want to pay for a CI/CD service. Best of all, this can run on your home hardware and you don't need to poke any holes in your firewall. It works by your runner reaching out to GitHub and pulling down the build scripts to run. So, it's relatively secure and gives you "unlimited" build minutes because you're using your own hardware.</p><h2 id="overview"><span class="me-2">Overview</span><a href="#overview" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>What GitHub provides you is basically an interactive script that you would need to manually run every time your server reboots. So, my approach is to turn that into a systemd service, or daemon so that it runs automatically on boot. Here is a summary of how to do this:</p><ol><li>Ideally create a virtual machine in your ProxMox hypervisor. Since I typically run two of everything, I'll set up something like a <code class="language-plaintext highlighter-rouge">gitrunner1.lab.example.com</code> on one ProxMox server and <code class="language-plaintext highlighter-rouge">gitrunner2.lab.example.com</code> on another, except the domain name would be for the domain name that I am supporting.<li>Prep the VM for service by generally following <a href="/posts/setting-up-a-github-runner/">Setting Up a Public VPS</a>. Even though this is a private service, you still want to secure it as much as possible, and it just takes a few minutes.<li>Install Docker from the <a href="https://docs.docker.com/engine/install/ubuntu/">Official Docker Documentation</a>.<li>Run the Script from GitHub to establish your Runner.<li>Turn the script into a systemd service.</ol><h2 id="setting-up-the-vm"><span class="me-2">Setting Up the VM</span><a href="#setting-up-the-vm" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Assuming you have an Ubuntu Server instance and you've done some <a href="/posts/setting-up-a-public-vps/">basic hardening</a>, you can start by installing Docker. This is the only dependency that you need to run the GitHub Runner. From the <a href="https://docs.docker.com/engine/install/ubuntu/">Official Docker Documentation</a>, you can basically run this whole block:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre><td class="rouge-code"><pre><span class="c"># STEP 1: Uninstall any potentially conflicting, old versions:</span>
<span class="k">for </span>pkg <span class="k">in </span>docker.io docker-doc docker-compose docker-compose-v2 <span class="se">\</span>
    podman-docker containerd runc<span class="p">;</span> <span class="k">do </span><span class="nb">sudo </span>apt-get remove <span class="nv">$pkg</span><span class="p">;</span> <span class="k">done</span>

<span class="c"># STEP 2: Setup Docker's `apt` repository:</span>
<span class="c"># - Add Docker's official GPG key:</span>
<span class="nb">sudo </span>apt-get update
<span class="nb">sudo </span>apt-get <span class="nb">install </span>ca-certificates curl
<span class="nb">sudo install</span> <span class="nt">-m</span> 0755 <span class="nt">-d</span> /etc/apt/keyrings
<span class="nb">sudo </span>curl <span class="nt">-fsSL</span> https://download.docker.com/linux/ubuntu/gpg <span class="nt">-o</span> /etc/apt/keyrings/docker.asc
<span class="nb">sudo chmod </span>a+r /etc/apt/keyrings/docker.asc

<span class="c"># - Add the repository to Apt sources:</span>
<span class="nb">echo</span> <span class="se">\</span>
  <span class="s2">"deb [arch=</span><span class="si">$(</span>dpkg <span class="nt">--print-architecture</span><span class="si">)</span><span class="s2"> signed-by=/etc/apt/keyrings/docker.asc] </span><span class="se">\</span><span class="s2">
  https://download.docker.com/linux/ubuntu </span><span class="se">\</span><span class="s2">
  </span><span class="si">$(</span><span class="nb">.</span> /etc/os-release <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">"</span><span class="k">${</span><span class="nv">UBUNTU_CODENAME</span><span class="k">:-</span><span class="nv">$VERSION_CODENAME</span><span class="k">}</span><span class="s2">"</span><span class="si">)</span><span class="s2"> stable"</span> | <span class="se">\</span>
  <span class="nb">sudo tee</span> /etc/apt/sources.list.d/docker.list <span class="o">&gt;</span> /dev/null
<span class="nb">sudo </span>apt-get update

<span class="c"># STEP 3: Install Docker:</span>

<span class="nb">sudo </span>apt-get <span class="nb">install</span> <span class="nt">-y</span> docker-ce docker-ce-cli containerd.io <span class="se">\</span>
    docker-buildx-plugin docker-compose-plugin
</pre></table></code></div></div><h2 id="running-the-github-runner-script"><span class="me-2">Running the GitHub Runner Script</span><a href="#running-the-github-runner-script" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Navigate to your GitHub Repository or your Organization if you want the runner to be available to all repos in that organization:</p><h3 id="for-organization-runners"><span class="me-2">For Organization Runners:</span><a href="#for-organization-runners" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><blockquote><p>https://github.com/organizations/«ORG_NAME»/settings/actions/runners</p></blockquote><h3 id="for-repository-runners"><span class="me-2">For Repository Runners:</span><a href="#for-repository-runners" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><blockquote><p>https://github.com/«ORG_NAME»/«REPO_NAME»/settings/actions/runners</p></blockquote><p>From either of those screens, click "New self-hosted runner" and follow the instructions making sure to pick the right OS and architecture for your VM:</p><p><a href="/assets/img/2025-03-03-runner-setup.png" class="popup img-link shimmer"><img src="/assets/img/2025-03-03-runner-setup.png" alt="GitHub Runner" loading="lazy"></a></p><h2 id="turning-the-runner-script-into-a-systemd-service"><span class="me-2">Turning the Runner Script into a Systemd Service</span><a href="#turning-the-runner-script-into-a-systemd-service" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>As you can see, it wants you to "start" your runner by running that <code class="language-plaintext highlighter-rouge">./run.sh</code> script. That means every time your VM reboots, you would need to log in and run that script. That's not very efficient. So, let's turn that into a systemd service.</p><p>First, let's put the GitHub Runner content in a directory. I use:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="c"># Make the directory</span>
<span class="nb">mkdir</span> <span class="nt">-p</span> /opt/gitrunner

<span class="c"># Switch to that directory</span>
<span class="nb">cd</span> /opt/gitrunner
</pre></table></code></div></div><h3 id="create-service-account"><span class="me-2">Create service account</span><a href="#create-service-account" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>To make things simpler, we want to create a service account that will run the GitHub Runner. We want to set the ownership, recursively of the <code class="language-plaintext highlighter-rouge">/opt/gitrunner</code> directory to this user:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="c"># Create the user</span>
<span class="nb">sudo </span>adduser gitrunner

<span class="c"># Add the user to the `docker` group</span>
<span class="nb">sudo </span>usermod <span class="nt">-aG</span> docker gitrunner

<span class="c"># Set the ownership of the directory where user `gitrunner` owns it, </span>
<span class="c"># but anyone in the `docker` group can write to it too.</span>
<span class="nb">sudo chown</span> <span class="nt">-R</span> gitrunner:docker /opt/gitrunner
</pre></table></code></div></div><h3 id="install-the-github-runner-script-and-create-the-systemd-service"><span class="me-2">Install the GitHub Runner Script and Create the Systemd Service</span><a href="#install-the-github-runner-script-and-create-the-systemd-service" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>From that directory (e.g. <code class="language-plaintext highlighter-rouge">/opt/gitrunner/</code>) is where I run those code blocks from the "New self-hosted runner" screen. Note that we can take advantage of our service account to run the script. You want to prefix the <code class="language-plaintext highlighter-rouge">./run.sh</code> script with <code class="language-plaintext highlighter-rouge">sudo -u gitrunner</code> to run it as the <code class="language-plaintext highlighter-rouge">gitrunner</code> user. So, your command will look something like this:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="c"># Run the GitHub `config.sh` script as the `gitrunner` user account:</span>
<span class="nb">sudo</span> <span class="nt">-u</span> gitrunner ./config.sh <span class="nt">--url</span> https://github.com/&lt;MY_ORG&gt; <span class="se">\</span>
    <span class="nt">--token</span> uRJDM9YprFpBc6A36BjbGdBbT2HwE
</pre></table></code></div></div><p>Ultimately you should have your <code class="language-plaintext highlighter-rouge">run.sh</code> here:</p><blockquote><p><code class="language-plaintext highlighter-rouge">/opt/gitrunner/actions-runner/run.sh</code></p></blockquote><p>If so (or change according to your setup), let's create a Systemd Unit file here:</p><blockquote><p><code class="language-plaintext highlighter-rouge">/etc/systemd/system/gitrunner.service</code></p></blockquote><p>And the contents are:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre>[Unit]
Description=GitHub Actions Runner
After=network.target

[Service]
ExecStart=/opt/gitrunner/actions-runner/run.sh
User=gitrunner
WorkingDirectory=/opt/gitrunner/actions-runner/
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
</pre></table></code></div></div><p>To have Systemd recognize the new service, you need to reload the daemon:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>systemctl daemon-reload
</pre></table></code></div></div><p>Now, let's enable and start the service:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="c"># Enable the service</span>
<span class="nb">sudo </span>systemctl <span class="nb">enable </span>gitrunner

<span class="c"># Start the service</span>
<span class="nb">sudo </span>systemctl start gitrunner
</pre></table></code></div></div><p>And that's it! Your GitHub Runner should now be running as a service on your VM. You can check the status with:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>systemctl status gitrunner
</pre></table></code></div></div><p>So what we've done is make so instead of "starting" your GitHub Runner by SSH'ing into your VM and running <code class="language-plaintext highlighter-rouge">run.sh</code>, it will start automatically on boot. You can start/stop/restart it with <code class="language-plaintext highlighter-rouge">systemctl</code> commands:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="c"># Start the service</span>
<span class="nb">sudo </span>systemctl start gitrunner

<span class="c"># Stop the service</span>
<span class="nb">sudo </span>systemctl stop gitrunner

<span class="c"># Restart the service</span>
<span class="nb">sudo </span>systemctl restart gitrunner

<span class="c"># Enable the service to start upon boot</span>
<span class="nb">sudo </span>systemctl <span class="nb">enable </span>gitrunner

<span class="c"># Disable the service from starting upon boot</span>
<span class="nb">sudo </span>systemctl disable gitrunner

<span class="c"># To check the current status of the service</span>
<span class="nb">sudo </span>systemctl status gitrunner
</pre></table></code></div></div><p>If you followed all of that and started your service, you should now be able to go back to the GitHub web interface, refresh the page and see your runners available to take jobs. For example:</p><p><a href="/assets/img/2025-03-03-runners-ready.png" class="popup img-link shimmer"><img src="/assets/img/2025-03-03-runners-ready.png" alt="GitHub Runners ready" loading="lazy"></a></p><blockquote class="prompt-tip"><p><strong>TIP:</strong> if you intend to use CodeQL, GitHub's Static Application Security Testing (SAST), then you can add the label of <code class="language-plaintext highlighter-rouge">code-scanning</code> to your runner. This will allow it to take CodeQL jobs.</p></blockquote><h2 id="using-the-runner"><span class="me-2">Using the Runner</span><a href="#using-the-runner" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Finally, as you saw in the documentation, in any GitHub Actions workflow, you can specify that you want to use a self-hosted runner. This is done by adding a <code class="language-plaintext highlighter-rouge">runs-on</code> key to your job. For example:</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="na">runs-on</span><span class="pi">:</span> <span class="s">self-hosted</span>
</pre></table></code></div></div><h3 id="warning---containerized-builds"><span class="me-2">WARNING - Containerized Builds</span><a href="#warning---containerized-builds" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>One important note here is that means that GitHub Action jobs will run directly on your VM, based out of that <code class="language-plaintext highlighter-rouge">/opt/gitrunner/</code> folder. This can quickly become a significant problem because your build will often want to install some software. Well, another build may want to install a slightly different version of other conflicting software. To take all of that off the table, just do builds in a container. Usually, you can find a container image that already has your build tools, but if not, you can always just start from a base Ubuntu image for example, install your tools, do your build, and then dispose of the container.</p><p>How you do this is in addition to the <code class="language-plaintext highlighter-rouge">runs-on</code> designation in your GitHub Actions Workflow YAML, you can add a <code class="language-plaintext highlighter-rouge">container</code> attribute. For example:</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="na">jobs</span><span class="pi">:</span>
  <span class="na">build</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Perform main build</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">self-hosted</span>
    <span class="na">container</span><span class="pi">:</span> <span class="s">ubuntu:22.04</span>
</pre></table></code></div></div><p>If you have the <code class="language-plaintext highlighter-rouge">runs-on</code> and the <code class="language-plaintext highlighter-rouge">container</code> set, then your GitHub Runner will spin up a new <code class="language-plaintext highlighter-rouge">ubuntu:22.04</code> container, and run the rest of that job in that container. Conversely, if you just had <code class="language-plaintext highlighter-rouge">runs-on</code> and no <code class="language-plaintext highlighter-rouge">container</code>, like this:</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="na">jobs</span><span class="pi">:</span>
  <span class="na">build</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Perform main build</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">self-hosted</span>
</pre></table></code></div></div><p>Then that means your build is running natively on your GitHub Runner host. When you <code class="language-plaintext highlighter-rouge">apt install</code> or <code class="language-plaintext highlighter-rouge">npm install</code> software, it's installing that software onto your Runner host - which again, can turn messy very fast. So, consider always using the <code class="language-plaintext highlighter-rouge">container</code> attribute as well to make your builds isolated, reproducible, and disposable.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/installation-guides/">Installation Guides</a>, <a href="/categories/services/">Services</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/linux/" class="post-tag no-text-decoration" >linux</a> <a href="/tags/ubuntu/" class="post-tag no-text-decoration" >ubuntu</a> <a href="/tags/vps/" class="post-tag no-text-decoration" >vps</a> <a href="/tags/security/" class="post-tag no-text-decoration" >security</a> <a href="/tags/github/" class="post-tag no-text-decoration" >github</a> <a href="/tags/runner/" class="post-tag no-text-decoration" >runner</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted me-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Setting%20Up%20a%20GitHub%20Runner%20-%20robertsinfosec&url=https%3A%2F%2Fwww.robertsinfosec.com%2Fposts%2Fsetting-up-a-github-runner%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter" > <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Setting%20Up%20a%20GitHub%20Runner%20-%20robertsinfosec&u=https%3A%2F%2Fwww.robertsinfosec.com%2Fposts%2Fsetting-up-a-github-runner%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook" > <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fwww.robertsinfosec.com%2Fposts%2Fsetting-up-a-github-runner%2F&text=Setting%20Up%20a%20GitHub%20Runner%20-%20robertsinfosec" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram" > <i class="fa-fw fab fa-telegram"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 mb-5 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/setting-up-a-github-runner/">Setting Up a GitHub Runner</a><li class="text-truncate lh-lg"> <a href="/posts/working-locally-with-supabase/">Working Locally with Supabase</a><li class="text-truncate lh-lg"> <a href="/posts/openvms-on-proxmox/">OpenVMS on ProxMox</a><li class="text-truncate lh-lg"> <a href="/posts/letsencrypt-in-your-homelab/">LetsEncrypt in your Homelab</a><li class="text-truncate lh-lg"> <a href="/posts/proxmox-part-2-networking-setup/">Proxmox Part 2: Networking Setup</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/homelab/">homelab</a> <a class="post-tag btn btn-outline-primary" href="/tags/ubuntu/">ubuntu</a> <a class="post-tag btn btn-outline-primary" href="/tags/infrastructure/">infrastructure</a> <a class="post-tag btn btn-outline-primary" href="/tags/virtualization/">virtualization</a> <a class="post-tag btn btn-outline-primary" href="/tags/proxmox/">proxmox</a> <a class="post-tag btn btn-outline-primary" href="/tags/virtualbox/">virtualbox</a> <a class="post-tag btn btn-outline-primary" href="/tags/security/">security</a> <a class="post-tag btn btn-outline-primary" href="/tags/linux/">linux</a> <a class="post-tag btn btn-outline-primary" href="/tags/on-prem/">on-prem</a> <a class="post-tag btn btn-outline-primary" href="/tags/private-cloud/">private-cloud</a></div></section></div><section id="toc-wrapper" class="ps-0 pe-4"><h2 class="panel-heading ps-3 pt-2 mb-2">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/setting-up-a-public-vps/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1739259720" data-df="ll" > Feb 11, 2025 </time><h4 class="pt-0 my-2">Setting Up a Public VPS</h4><div class="text-muted"><p> There are many reasons you might need to have a public-facing server. You might want to host a website, run a game server, or just have a place to store your files. Whatever the reason, it&#39;s import...</p></div></div></a></article><article class="col"> <a href="/posts/creating-a-local-ubuntu-mirror/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1651311660" data-df="ll" > Apr 30, 2022 </time><h4 class="pt-0 my-2">Creating a Local Ubuntu Mirror</h4><div class="text-muted"><p> Overview I almost exclusively use Ubuntu Server as my operating system of choice for everything. This is because there is broad support, it&#39;s super-stable, there is lots of engagement where people...</p></div></div></a></article><article class="col"> <a href="/posts/using-launchpad-for-ssh-keys/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1653836460" data-df="ll" > May 29, 2022 </time><h4 class="pt-0 my-2">Using Launchpad for SSH Keys</h4><div class="text-muted"><p> Overview Ideally, when you create new servers, you want to turn OFF SSH password authentication and only allow SSH key logins. This eliminates the possiblity of bad-actors trying to brute-force th...</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/setting-up-a-public-vps/" class="btn btn-outline-primary" aria-label="Older" ><p>Setting Up a Public VPS</p></a> <a href="/posts/vibe-coding-a-caffeine-tracker/" class="btn btn-outline-primary" aria-label="Newer" ><p>Vibe-Coding a Caffeine Tracker</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p> © <time>2025</time> <a href="https://github.com/robertsinfosec">robertsinfosec</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span></p><p>Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/homelab/">homelab</a> <a class="post-tag btn btn-outline-primary" href="/tags/ubuntu/">ubuntu</a> <a class="post-tag btn btn-outline-primary" href="/tags/infrastructure/">infrastructure</a> <a class="post-tag btn btn-outline-primary" href="/tags/virtualization/">virtualization</a> <a class="post-tag btn btn-outline-primary" href="/tags/proxmox/">proxmox</a> <a class="post-tag btn btn-outline-primary" href="/tags/virtualbox/">virtualbox</a> <a class="post-tag btn btn-outline-primary" href="/tags/security/">security</a> <a class="post-tag btn btn-outline-primary" href="/tags/linux/">linux</a> <a class="post-tag btn btn-outline-primary" href="/tags/on-prem/">on-prem</a> <a class="post-tag btn btn-outline-primary" href="/tags/private-cloud/">private-cloud</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask"></div><script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.7.1/dist/jquery.min.js,npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js,npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.10/dayjs.min.js,npm/dayjs@1.11.10/locale/en.min.js,npm/dayjs@1.11.10/plugin/relativeTime.min.js,npm/dayjs@1.11.10/plugin/localizedFormat.min.js,npm/tocbot@4.21.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/unregister.js"></script> <script> /* Note: dependent library will be loaded in `js-selector.html` */ SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5"></p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
